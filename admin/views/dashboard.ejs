<%- include('header') %>

<h2 class="mb-4">Dashboard</h2>

<div class="row g-3">
  <div class="col-sm-6 col-lg-3">
    <a href="<%= base %>/orders?status=pending" class="text-decoration-none">
      <div class="card border-warning h-100">
        <div class="card-body">
          <h6 class="card-subtitle text-muted mb-2">Pending Orders</h6>
          <h2 class="text-warning mb-0"><%= counts.pendingOrders %></h2>
        </div>
      </div>
    </a>
  </div>
  <div class="col-sm-6 col-lg-3">
    <a href="<%= base %>/orders?status=confirmed" class="text-decoration-none">
      <div class="card border-primary h-100">
        <div class="card-body">
          <h6 class="card-subtitle text-muted mb-2">Confirmed Orders</h6>
          <h2 class="text-primary mb-0"><%= counts.confirmedOrders %></h2>
        </div>
      </div>
    </a>
  </div>
  <div class="col-sm-6 col-lg-3">
    <a href="<%= base %>/orders" class="text-decoration-none">
      <div class="card h-100">
        <div class="card-body">
          <h6 class="card-subtitle text-muted mb-2">Total Orders</h6>
          <h2 class="mb-0"><%= counts.totalOrders %></h2>
        </div>
      </div>
    </a>
  </div>
  <div class="col-sm-6 col-lg-3">
    <a href="<%= base %>/products" class="text-decoration-none">
      <div class="card h-100">
        <div class="card-body">
          <h6 class="card-subtitle text-muted mb-2">Active Products</h6>
          <h2 class="mb-0"><%= counts.activeProducts %></h2>
        </div>
      </div>
    </a>
  </div>
  <div class="col-sm-6 col-lg-3">
    <a href="<%= base %>/subscriptions" class="text-decoration-none">
      <div class="card <%= counts.overdueSubscriptions > 0 ? 'border-danger' : '' %> h-100">
        <div class="card-body">
          <h6 class="card-subtitle text-muted mb-2">Active Subscriptions</h6>
          <h2 class="mb-0"><%= counts.activeSubscriptions %></h2>
          <% if (counts.overdueSubscriptions > 0) { %>
            <span class="badge bg-danger mt-1"><%= counts.overdueSubscriptions %> overdue</span>
          <% } %>
        </div>
      </div>
    </a>
  </div>
  <div class="col-sm-6 col-lg-3">
    <a href="<%= base %>/reservations" class="text-decoration-none">
      <div class="card h-100">
        <div class="card-body">
          <h6 class="card-subtitle text-muted mb-2">Upcoming Reservations</h6>
          <h2 class="mb-0"><%= counts.upcomingReservations %></h2>
        </div>
      </div>
    </a>
  </div>
  <div class="col-sm-6 col-lg-3">
    <a href="<%= base %>/drops" class="text-decoration-none">
      <div class="card h-100">
        <div class="card-body">
          <h6 class="card-subtitle text-muted mb-2">Active Drops</h6>
          <h2 class="mb-0"><%= counts.activeDrops %></h2>
        </div>
      </div>
    </a>
  </div>
  <% if (counts.subscriptionsToday + counts.reservationsToday + counts.dropsToday > 0) { %>
  <div class="col-sm-6 col-lg-3">
    <a href="<%= base %>/calendar/day/<%= today %>" class="text-decoration-none">
      <div class="card border-info h-100">
        <div class="card-body">
          <h6 class="card-subtitle text-muted mb-2">Today's Prep</h6>
          <div>
            <% if (counts.subscriptionsToday) { %><span class="badge bg-success"><%= counts.subscriptionsToday %> deliveries</span> <% } %>
            <% if (counts.reservationsToday) { %><span class="badge" style="background:#6f42c1;"><%= counts.reservationsToday %> reservations</span> <% } %>
            <% if (counts.dropsToday) { %><span class="badge bg-warning"><%= counts.dropsToday %> drops</span> <% } %>
          </div>
        </div>
      </div>
    </a>
  </div>
  <% } %>
  <% if (counts.lowStockProducts > 0) { %>
  <div class="col-sm-6 col-lg-3">
    <a href="<%= base %>/products" class="text-decoration-none">
      <div class="card border-danger h-100">
        <div class="card-body">
          <h6 class="card-subtitle text-muted mb-2">Low Stock</h6>
          <h2 class="text-danger mb-0"><%= counts.lowStockProducts %></h2>
          <small class="text-danger">products need restocking</small>
        </div>
      </div>
    </a>
  </div>
  <% } %>
</div>

<%- include('footer') %>
